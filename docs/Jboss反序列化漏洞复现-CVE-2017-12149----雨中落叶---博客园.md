# Jboss 反序列化漏洞复现(CVE-2017-12149) - 雨中落叶 - 博客园

> 原文：[`www.cnblogs.com/yuzly/p/11240145.html`](https://www.cnblogs.com/yuzly/p/11240145.html)

Jboss 反序列化漏洞复现(CVE-2017-12149)

**一、漏洞描述**

该漏洞为 Java 反序列化错误类型,存在于 jboss 的 HttpInvoker 组件中的 ReadOnlyAccessFilter 过滤器中。该过滤器在没有进行任何安全检查的情况下尝试将来自客户端的数据流进行反序列化,从而导致了漏洞。

**二、漏洞影响版本**

Jboss 5.x

Jboss 6.x

**三、漏洞复现环境搭建**

Win7 :192.168.10.171

1、 安装 java 环境,测试 java 环境

　　![](img/b6544b92be3b2903b69094597d601015.png)

2、 下载 jboss-as-6.1.0-final，下载下来是一个压缩包 [`jbossas.jboss.org/downloads/`](http://jbossas.jboss.org/downloads/)

3、解压到一个目录(c:\jboss\)

4、新建环境变量

JBOSS_HOME:值为:C:\jboss\jboss-6.1.0.Final

在 path 中加入:%JBOSS_HOME%\bin;

5、完成环境变量配置后,在 C:\jboss\jboss-6.1.0.Final\bin 下打开 cmd,输入 call run.bat,出现下图所示即成功启动。

　　![](img/dc01ab491c581e4b66196b72ae4331ed.png)

　　![](img/fd8fd694243b6fa7139ffdd1c084df0f.png)

6、本地测试,在浏览器输入 127.0.0.1:8080

　　![](img/aac09e9695439c4aea65ad1dae1501fa.png)

7、默认不能远程访问,需要修改配置文件，配置文件位置 jboss-6.1.0.Final\server\default\deploy\jbossweb.sar\server.xml,然后重启 jboss

　　![](img/392d4fbddf39a55fa7585555ec43d608.png)

8、测试远程访问

　　![](img/af286e4d0c7348d7a69f47e7e3c07079.png)

9、浏览器访问 http://192.168.10.171:8080/invoker/readonly,若显示 HTTP Status 500,则说明存在漏洞

　　![](img/d71d286579b49404be0c14ff5023a19f.png)

10、使用工具测试验证漏洞是否存在,工具下载地址: https://github.com/yunxu1/jboss-_CVE-2017-12149

　　![](img/721bdd360ac2178e5603407a481e24e6.png)

11、执行 whomai 命令

　　![](img/32346152f7f15cf6b2a278261de4a631.png)

**四、漏洞防御**

1、升级版本

2、不需要的 http-invoker.sar 组件,删除此组件