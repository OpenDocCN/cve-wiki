# Apache-Tomcat-Ajp 漏洞(CVE-2020-1938)漏洞复现 和处理 - digdeep - 博客园

> 原文：[`www.cnblogs.com/digdeep/p/12344434.html`](https://www.cnblogs.com/digdeep/p/12344434.html)

漏洞具体情况参考：[`blog.nsfocus.net/cve-2020-1938/`](http://blog.nsfocus.net/cve-2020-1938/)

复现方法参考：[`github.com/0nise/CVE-2020-1938`](https://github.com/0nise/CVE-2020-1938)

需要特别注意的是，之前的 tomcat，AJP 默认是打开的！！！！

本地复现，版本 Tomcat 7.0.95：

1\. server.xml 配置：

![](img/b1aa61a24589319e1f254bcc2d4ec6a1.png)

 启动 tomcat，cmd，执行命令：

![](img/bb83db6dd3b0629fc81e5f712d5d7bfb.png)

可以读取文件。修改 server.xml 配置：

![](img/8a204bd63a62db031983b4b2d06b50d7.png)

 在启动 tomcat，再次访问测试：

![](img/4e96c0a5b8681aba8ac5f23badda3620.png)

被禁止访问了。说明我们的配置起作用了。

[`blog.nsfocus.net/cve-2020-1938/`](http://blog.nsfocus.net/cve-2020-1938/) 该链接中说 TOMCAT 7 使用 

address="127.0.0.1" **secret="xxxxx"**

应该是不对的。经过测试，Tomcat7  应该是使用：

address="127.0.0.1" **requiredSecret="xxxx"**

已测试为准！！！ 

**为保险起见，最好都加上：**

**address="127.0.0.1"** secret="xxxxx" **requiredSecret="xxxx"******