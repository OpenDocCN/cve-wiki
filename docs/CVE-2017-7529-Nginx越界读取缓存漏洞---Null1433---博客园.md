# CVE-2017-7529-Nginx 越界读取缓存漏洞 - Null1433 - 博客园

> 原文：[`www.cnblogs.com/null1433/p/12727875.html`](https://www.cnblogs.com/null1433/p/12727875.html)

漏洞参考

[`blog.csdn.net/qq_29647709/article/details/85076309`](https://blog.csdn.net/qq_29647709/article/details/85076309)

漏洞原因

Nginx 在反向代理站点的时候，通常会将一些文件进行缓存，特别是静态文件。缓存的部分存储在文件中，每个缓存文件包括“文件头”+“HTTP 返回包头”+“HTTP 返回包体”。如果二次请求命中了该缓存文件，则 Nginx 会直接将该文件中的“HTTP 返回包体”返回给用户。如果我的请求中包含 Range 头，Nginx 将会根据我指定的 start 和 end 位置，返回指定长度的内容。而如果我构造了两个负的位置，如(-600, -9223372036854774591)，将可能读取到负位置的数据。如果这次请求又命中了缓存文件，则可能就可以读取到缓存文件中位于“HTTP 返回包体”前的“文件头”、“HTTP 返回包头”等内容。

漏洞影响

该漏洞影响所有 0.5.6 - 1.13.2 版本内默认配置模块的 Nginx 只需要开启缓存攻击者即可发送恶意请求进行远程攻击造成信息泄露。

当 Nginx 服务器使用代理缓存的情况下攻击者通过利用该漏洞可以拿到服务器的后端真实 IP 或其他敏感信息。
通过我们的分析判定该漏洞利用难度低可以归属于 low-hanging-fruit 的漏洞在真实网络攻击中也有一定利用价值

环境搭建

[`github.com/vulhub/vulhub/tree/master/nginx/CVE-2017-7529`](https://github.com/vulhub/vulhub/tree/master/nginx/CVE-2017-7529)

POC 验证

[`github.com/liusec/CVE-2017-7529`](https://github.com/liusec/CVE-2017-7529)

[`github.com/liusec/CVE-2017-7529`](https://github.com/liusec/CVE-2017-7529)

![](img/9934d76d7988fac33896ea5d6982886f.png)