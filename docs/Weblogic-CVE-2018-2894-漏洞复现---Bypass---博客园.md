# Weblogic CVE-2018-2894 漏洞复现 - Bypass - 博客园

> 原文：[`www.cnblogs.com/xiaozi/p/9344767.html`](https://www.cnblogs.com/xiaozi/p/9344767.html)

**0x01 前言**

　　Oracle 官方发布了 7 月份的关键补丁更新 CPU（Critical Patch Update），其中针对可造成远程代码执行的高危漏洞 CVE-2018-2894 进行修复：http://www.oracle.com/technetwork/security-advisory/cpujul2018-4258247.html

**0x02 环境搭建**

1、首先到 Oracle 官网下载安装包：

下载地址：http://download.oracle.com/otn/nt/middleware/12c/12213/fmw_12.2.1.3.0_wls_quick_Disk1_1of1.zip

下载本地解压：

![](img/dd1da36c75ec420cfb608f636c9defab.png)

2、安装设置

安装 JDK，设置 JAVA_HOME 环境变量，JDK1.8 版本以上；

将 fmw_12.2.1.3.0_wls_quick.jar 拷贝到需要安装的目录下（称为<ORACLE_HOME>）；

以管理员身份运行 CMD，然后命令行进入该<ORACLE_HOME>目录并运行：java -jar fmw_12.2.1.2.0_wls_quick.jar；

![](img/0623b578389447c67e594b9837d05793.png)

3、上面步骤完后，进入<ORACLE_HOME>运行文件\oracle_common\common\bin\config.cmd 进行 domain 的相关配置，其会启动一个 Java 界面做相关设置，一直下一步即可（注意记住服务器后台管理的账号密码，URL:http://localhost:7001/console/ 账户：weblogic/abc123!!!）；

 ![](img/1f8af26c47dcc6b40364c45235734cc2.png)

4、进入已经配置好的 domain 目录启动服务器，即<ORACLE_HOME>\user_projects\domains\base_domain\startWebLogic.cmd，双击运行

**0x03 漏洞复现**

1、访问 http://your-ip:7001/ws_utc/config.do，第一次访问部署

![](img/7358150d91ad8960158bb714d99346eb.png)

2、设置 Work Home Dir 为 C:/Oracle/wls12213/user_projects/domains/base_domain/servers/AdminServer/tmp/_WL_internal/com.oracle.webservices.wls.ws-testclient-app-wls/4mcj4y/war/css

![](img/7e79590c753ca396cc98d5ddb5055e81.png)

3、安全--添加，然后上传 webshell：

![](img/04612ba7426a06b6e38a7b15b089ee4a.png)

4、上传后，查看返回的数据包，其中有时间戳：

![](img/57f0e5bc6dab1b3c8b2bf4576a2c438f.png)

5、访问 http://192.168.204.146:7001/ws_utc/css/config/keystore/[时间戳]_[文件名]  即  http://192.168.204.146:7001/ws_utc/css/config/keystore/1532569961474_JspSpy.jsp ，获取 webshell：

![](img/f4c604d2eb7a99ad8895b3643dc5c5c8.png)

```
推荐阅读： 
```

[Window 应急响应（一）：FTP 暴力破解](https://www.cnblogs.com/xiaozi/p/9425552.html)

[Window 应急响应（二）：蠕虫病毒](https://www.cnblogs.com/xiaozi/p/9425574.html)

[Window 应急响应（三）：勒索病毒](https://www.cnblogs.com/xiaozi/p/9425587.html)

[Window 应急响应（四）：挖矿病毒](https://www.cnblogs.com/xiaozi/p/Window%E5%BA%94%E6%80%A5%E5%93%8D%E5%BA%94%EF%BC%88%E5%9B%9B%EF%BC%89%EF%BC%9A%E6%8C%96%E7%9F%BF%E7%97%85%E6%AF%92)

**最后**

**欢迎关注个人微信公众号：Bypass--，每周原创一篇技术干货。 **

![](img/5070e717729730b3a2ced67d16ff56c2.png)