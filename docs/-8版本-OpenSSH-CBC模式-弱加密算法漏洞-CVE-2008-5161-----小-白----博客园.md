# 【8 版本】OpenSSH CBC 模式 弱加密算法漏洞(CVE-2008-5161) - -小-白- - 博客园

> 原文：[`www.cnblogs.com/xiongty/p/16087827.html`](https://www.cnblogs.com/xiongty/p/16087827.html)

​

1、上篇写了弱加密算法解决方法，但是在实际测试中 发现 CentOS8 版本系统，写入 sshd_config 文件指定加密算法并未生效

![](img/8bc05031c1c79dcb660cdb07d2c7200d.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

可以看到还是存在 CBC 类型加密算法

随即对 8 版本弱加密算法更改进行排查

2、排查 8 版本需更改文件

![](img/77c7178733c189449d0b09b38a4328d0.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

man sshd_config 发现并未标明系统默认支持加密算法，以及开头这句话：

The default is handled system-wide by crypto-policies(7). To see the current defaults and how to modify them, see manual page update-crypto-policies(8).

意思就是默认的加密策略由 crypto-policies(7)处理。需要查看当前默认值以及更改需要查看手册 update-crypto-policies(8).

继续 man

3、定位需更改文件位置

![](img/aaab2d5d005270608aec8d251194a3b2.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

直接找到 FILES，找到这个位置：

 /etc/crypto-policies/back-ends  

Contains the generated policies in separated files, and in a format readable by the supported back ends.

这个目录下的是单独的策略文件，看下图，是个软链接实际文件在后面

![](img/b2d0576b51e1e680d883d517be28c8bb.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

 4、定位文件后更改

编辑 opensshserver.config 文件，首行删除 “.cbc” 内容

![](img/18aacb8ae28a720d413c3c6e0b3cd1f0.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

![](img/6642695e4cfc5e19c7aff657904eeba3.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​ 

5、重启 sshd 服务并查看是否还存在弱加密算法

![](img/ef46d8fd907041c1af5dbcbf707c5d3d.png)![](img/b2feef84d90d474db0eb48b5bed350f9.png "点击并拖拽以移动")​

可以看到，cbc 相关弱加密算法已经没有了，8 版本系统解决 

​