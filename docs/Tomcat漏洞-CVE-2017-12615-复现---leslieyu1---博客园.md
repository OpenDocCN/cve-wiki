# Tomcat 漏洞（CVE-2017-12615）复现 - leslieyu1 - 博客园

> 原文：[`www.cnblogs.com/yuyi123/p/17114097.html`](https://www.cnblogs.com/yuyi123/p/17114097.html)

#  漏洞原理：

**漏洞原理：**

Tomcat 配置文件/conf/web.xml 配置了可写（readonly=false），导致可以使用 PUT 方法上传任意文件，攻击者将精心构造的 payload 向服务器上传包含任意代码的 JSP 文件。之后，JSP 文件中的代码将能被服务器执行

# 漏洞范围：

Apache Tomcat 7.0.0 - 7.0.81

# 漏洞复现：

首先在自己 linux 的 docker 开启镜像

进入 linux 找到下载的环境文件 cd 进入到相对应的漏洞文件夹内

![](img/29e2e0aa059bd3990d0e2c73301c4da6.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 ![](img/be2893efa81c400a2492c9650b7cf2de.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 ![](img/a2401c976b15c72a2d072a4d8475b6a9.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 之后开启镜像        docker-compose up -d

![](img/c5da8bcdb50ecde2086adb18dcdcbcd5.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 开启后就可以用浏览器访问网站了（默认 8080 端口）

http://192.168.48.103:8080

![](img/a3baf45a2dc5d37958eb1076dbfbc571.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 可以进行漏洞复现。

首先抓包，用 burp 抓到访问这个网站的包

![](img/7a0c9f751a366e829c6694eba2e7b577.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 发送到 repeater 进行修改

![](img/a318d97e23151127fbd426a4011314e9.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

 然后点击发送，这样一来，一个 jsp 被上传进去

打开冰蝎，新建一个链接

![](img/978d209abe6104de57d58fc60c5d31bd.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

然后成功链接上

![](img/e40ed1fd1a5e5e32711e0ca592ce4ddc.png)![](img/bbb97c5c93c38d32f6dea837960f822c.png "点击并拖拽以移动")​编辑

​