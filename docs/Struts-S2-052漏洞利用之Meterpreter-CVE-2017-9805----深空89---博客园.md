# Struts S2-052 漏洞利用之 Meterpreter（CVE-2017-9805） - 深空 89 - 博客园

> 原文：[`www.cnblogs.com/shenkong/p/17413315.html`](https://www.cnblogs.com/shenkong/p/17413315.html)

Struts S2-052 漏洞爆出来已经快一周了，大家可能更想知道其危害~鸡肋？

这里就直接给出漏洞利用拿 Meterpreter 的过程，想了解更多的请参考其他文章，下面是实验演示部分。Struts S2-052 漏洞利用之 Meterpreter

## 实验环境

靶机：165.227.29.209   （Ubuntu 16.04 、Apache/2.4.18、Struts 2.5.12：struts2-rest-showcase）

攻击机： 114.*.*.31（Kali2.0）

漏洞 url: [`165.227.29.209:8080/struts2-rest-showcase`](http://165.227.29.209:8080/struts2-rest-showcase)

![](img/d9493bedeccb51d07beb5b8f8adcd06a.png)

【注】环境是搭载在 VPS 上的，大家可以随便测试。

## 漏洞利用 EXP 之 MSF

脚本地址：[struts2_rest_xstream.rb](https://github.com/wvu-r7/metasploit-framework/blob/5ea83fee5ee8c23ad95608b7e2022db5b48340ef/modules/exploits/multi/http/struts2_rest_xstream.rb)

大家可以把这个脚本加到 Metasploit 中， 再重启 Metasploit 应该就能看到了，官方应该已经更新了，大家可以手动添加或者更新一下 Metasploit。

可以跟链接中的位置一样放在：metasploit-framework/modules/exploits/multi/http/struts2_rest_xstream.rb

root@kali:~# msfconsole

msf > use exploit/multi/http/struts2_rest_xstream

![](img/e3dfe7d86b67482a27269441443631df.png)

就可以使用这个脚本了。

## 漏洞利用之 Meterpreter

需要注意的是，默认的 payload 是： linux/x64/meterpreter_reverse_https， 大家也可以尝试其它的 payload。

利用之前需要设置一下 RHOST 和 LHOST（公网 ip），使用默认端口即可。

![](img/e225a359eb1e9365ab74638fbe9e376c.png)

本地执行命令的话，正常回显没有问题，远程拿 meterpreter，不知道为啥最近执行命令时不那么顺利，ip 地址我就不掩饰了，让大家看着更**，这是在 VPS 上搭建的测试环境，过段时间就将 VPS 销毁。

【注】如果图片看不清楚，可以右键图片，在新标签页中打开。

作者：[starnight_cyber](https://www.cnblogs.com/Hi-blog/)出处：[`www.cnblogs.com/Hi-blog/`](https://www.cnblogs.com/Hi-blog/)github：[`github.com/starnightcyber/`](https://github.com/starnightcyber/)