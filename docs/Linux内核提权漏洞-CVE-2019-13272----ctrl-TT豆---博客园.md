# Linux内核提权漏洞（CVE-2019-13272） - ctrl_TT豆 - 博客园

> 原文：[https://www.cnblogs.com/-chenxs/p/11771512.html](https://www.cnblogs.com/-chenxs/p/11771512.html)

### 漏洞描述

kernel / ptrace.c中的ptrace_link错误地处理了想要创建ptrace关系的进程的凭据记录，这允许本地用户通过利用父子的某些方案来获取root访问权限 进程关系，父进程删除权限并调用execve（可能允许攻击者控制）。 一个影响因素是对象寿命问题（也可能导致恐慌）。 另一个影响因素是将ptrace关系标记为特权，这可以通过（例如）Polkit的pkexec帮助程序与PTRACE_TRACEME进行利用。获取root权限。

影响版本：Linux Kernel < 5.1.17

但是经过实验来说，对ubuntu影响更大，debian和centos高一点的就提不了权。

### 漏洞复现

测试版本Ubuntu18.04.1

1、漏洞exp下载，防在Home目录下

下载地址：[https://github.com/bcoles/kernel-exploits/tree/master/CVE-2019-13272](https://github.com/bcoles/kernel-exploits/tree/master/CVE-2019-13272)

在unbuntu下面git clone以下就可以了

![](../Images/5cded6b71c28386994cda5ef05fb64b4.png)

 2、对下载好的漏洞exp进行编译,运行编译好的文件

```
gcc cve-2019-13272.c -o cve-poc
./cve-poc
```

![](../Images/ae127758be9eb75e29c363c04333b190.png)

 3、成功获取root权限

![](../Images/eeb5cb67fa3e31c6107cd19360f85704.png)