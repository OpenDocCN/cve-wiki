# 解决 mysql 漏洞 Oracle MySQL Server 远程安全漏洞(CVE-2015-0411) - 望星辰大海 - 博客园

> 原文：[`www.cnblogs.com/tohxyblog/p/6734386.html`](https://www.cnblogs.com/tohxyblog/p/6734386.html)

有时候会检测到服务器有很多漏洞，而大部分漏洞都是由于服务的版本过低的原因，因为官网出现漏洞就会发布新版本来修复这个漏洞，所以一般情况下，我们只需要对相应的软件包进行升级到安全版本即可。

通过查阅官网信息， Oracle MySQL Server 远程安全漏洞(CVE-2015-0411)，受影响系统：

Oracle MySQL Server <= 5.6.21
Oracle MySQL Server <= 5.5.40

因此我们需要将 mysql 的版本升级到 5.6.21 之后，这里我们选择 5.6.35 版本，下面开始升级。

一、备份并删除原有的 mysql 包

```
mysqldump -u root -p --all-databases >/usr/databases.sql   //先备份原有所有数据，防止数据丢失。
service mysql stop                                         //停止 mysql 服务
service tomcat stop　　　　　　　　　　　　　　　　　　　　　　　 //停止 tomca 服务，防止在更新的时候有新数据进入丢失　　
yum remove mysql mysql-*                                   //移除原有 mysql 服务 yum list installed | grep mysql                            //查看已经安装的 mysql 服务
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　 　//如果有，可输入命令删除：yum remove mysql－libs *rpm -qa | grep -i mysql* //如果有，可输入命令删除：rpm -e 【列表】 
```

 二、安装 5.6.35 的 mysql（两种方式）

```
第一种（服务器能 ping 通百度，简单方法）：
rpm -Uvh http://repo.mysql.com/mysql-community-release-el6-5.noarch.rpm
yum -y install mysql-community-server
//依次输入两条命令，进行安装升级，成功之后输入 mysql -V 看到版本即可

第二种（服务器不能 ping 通百度）：
1.到 http://mirrors.sohu.com/mysql/MySQL-5.6 下载 MySQL-5.6.35-1.linux_glibc2.5.x86_64.rpm-bundle.tar。
2.将其放到/usr 目录下并进入目录：cd /usr
3.解压：tar -xvf MySQL-5.6.35-1.linux_glibc2.5.x86_64.rpm-bundle.tar 
4.安装解压出的 RPM 包，主要是下面四个
```

```
 ##Server 包：
[root@mysql ~]# rpm -ivh MySQL-server-5.6.35-1.linux_glibc2.5.x86_64.rpm
 ##Client 包：
[root@mysql ~]# rpm -ivh MySQL-client-5.6.35-1.linux_glibc2.5.x86_64.rpm
 ##库函数包：
[root@mysql ~]# rpm -ivh MySQL-devel-5.6.35-1.linux_glibc2.5.x86_64.rpm
[root@mysql ~]# rpm -ivh MySQL-shared-5.6.35-1.linux_glibc2.5.x86_64.rpm
安装完之后输入 mysql -V 看到版本即可
```

 三、mysql 初始化：

```
1.启动 mysql，在第一次启动的时候进行：service mysql start。
注：如果启动的时候有关于 PID 的报错，不能启动。输入命令  ps -ef|grep mysqld 。  看到有 mysql 服务，将 mysql 服务全部 kill 掉，命令  kill [进程 ID]，然后重新启动即可。

2.停止 mysql，进入安全模式修改密码。
service mysql stop
```

  /usr/local/[mysql](http://lib.csdn.net/base/mysql "MySQL 知识库")/bin/mysqld_safe --skip-grant-tables &
  /usr/local/mysql/bin/mysql -u root -p
  use mysql;

　update user set password=password("new_pass") where user="root";  
  flush privileges;

　quit

 3.重启 mysql，并运行 sql 脚本载入数据。

　service mysqld restart

　chkconfig --list   //看到列表中 mysql 的 3 4 5 全是 on 即可，说明开机启动，即可不用管。

  mysql -u root -p

  source /usr/databases.sql

到这里就完成了升级了~