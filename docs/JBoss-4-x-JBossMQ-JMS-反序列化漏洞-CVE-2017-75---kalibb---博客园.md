# JBoss 4.x JBossMQ JMS 反序列化漏洞 CVE-2017-75 - kalibb - 博客园

> 原文：[`www.cnblogs.com/lzkalislw/p/16467410.html`](https://www.cnblogs.com/lzkalislw/p/16467410.html)

### 1.漏洞描述

```
Red Hat JBoss Application Server 是一款基于 JavaEE 的开源应用服务器。JBoss AS  4.x 及之前版本中，JbossMQ 实现过程的 JMS over HTTP Invocation  Layer 的 HTTPServerILServlet.java 文件存在反序列化漏洞，远程攻击者可借助特制的序列化数据利用该漏洞执行任意代码。
```

### 2.影响版本

**JBoss AS 4.x 及之前版本**

### 3.漏洞环境搭建

```
cd vulhub/jboss/CVE-2017-7504
docker-compose build
docker-compose up -d
```

### 4.漏洞复现过程

![](img/bd503c06d4271c6831074f399e0688d3.png)

浏览器访问 127.0.0.1:8080

![](img/d8d182589c7ef177c2566af1e84b294c.png)

使用漏洞扫描工具进行扫描

```
python3 jexboss.py -host http://127.0.0.1:8080
```

扫描结果

![](img/33669a7dd50d656f19603862f87114ad.png)

 利用结果,成功获取 shell

![](img/267a827e42ecd1b85f21967a866c7f61.png)

 5.修复方案

```
1、删除 commons-collections-*.jar 中的三个文件
\org\apache\commons\collections\functors\InvokerTransformer.class 
\org\apache\commons\collections\functors\InstantiateFactory.class 
\org\apache\commons\collections\functors\InstantiateTransfromer.class 
​
2.删除$JBOSS_HOME/[server]/all/deploy 和 $JBOSS_HOME/[server]/default/deploy 下的
Jmx-console.war、Web-console.war 两个文件夹
​
3.升级版本
```