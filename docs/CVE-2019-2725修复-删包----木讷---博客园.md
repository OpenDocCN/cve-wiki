# CVE-2019-2725 修复（删包） - 木讷 - 博客园

> 原文：[`www.cnblogs.com/iamver/p/10945454.html`](https://www.cnblogs.com/iamver/p/10945454.html)

本来想试试打补丁，但是有些麻烦，而且 oracle 补丁黑名单的方式总不让人放心。

因此考虑直接删除相关的包。

该方式适用于[xmldecoder 漏洞系列](https://www.vulbox.com/knowledge/detail/?id=46)，如 CVE-2017-3506、CVE-2017-10271、CVE-2019-2729

步骤为：

1、停止 weblogic 服务。

netstat -ap | grep 7001

获取 weblogic 相关进程的 PID

然后，kill -9 PID

2、首先要删除的是，bea_wls9_async_response.war 和 wls-wsat.war 这两个包。

应该在

 ${WL_HOME}/wlserver_10.3/server/lib 下。

3、当然还有缓存。

如 wls-wsat 包，应该是这样的形式。

${WL_HOME}/user_projects/domains/test_domain/servers/AdminServer/tmp/.internal/wls-wsat.war   

${WL_HOME}/user_projects/domains/test_domain/servers/AdminServer/tmp/_WL_internal/wls-wsat

同理，bea_wls9_async_response 也如此。

4、清理缓存，一定要同时把 war 包和 tmp 文件删掉再重启，只删其中一个或者删了一个重启后再删另外一个都是不能修复。原理上是在启动时 lib 下的 war 包会复制到 tmp/.internal/下。如果只删除 2 那再启动时又复制回来显然没效果，如果只删除 lib 下的 war 包那重启时 tmp 下的包并不会被清除，所以还是没效果。

为了省事，我是直接删了 tmp 目录。

rm -rf  ${WL_HOME}/user_projects/domains/test_domain/servers/AdminServer/tmp/   

最后全局检索下有没有类似 war 或者目录。

5、启动 weblogic 服务。

 nohup ./startweblogic.sh &

访问，404，成功。

补充：目前出了最新补丁，也就是 CVE-2019-2729，删包怕影响业务的可以考虑打上 U512 的全量和 IL49 的增量补丁。

3506 补丁：

![](img/8e9f32af8439244392a7bb46a722527c.png)

10271 补丁：

![](img/cf6bf60d0b85bb46a8540226fa5bdcbd.png)

 2725 补丁：

![](img/612abc7ddb158bed4f58980a48538436.png)

2729 白名单补丁：

![](img/a74cb45243f9fa2ec103437b9ceb8f77.png)

 参考链接：

　　　　　　[`xxlegend.com/2019/04/30/CVE-2019-2725%E5%88%86%E6%9E%90/`](http://xxlegend.com/2019/04/30/CVE-2019-2725%E5%88%86%E6%9E%90/)